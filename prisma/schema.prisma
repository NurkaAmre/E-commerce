generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                  String      @id @default(cuid())
  username            String      @unique
  first_name          String  
  last_name           String
  email               String      @unique
  phone               Int?
  address             Address?    @relation(fields: [address_id], references: [id])
  address_id          String?     @unique  
  orders              Order[]
  created_at          DateTime    @default(now())
  updated_at          DateTime    @updatedAt
}

model Address {
  id                  String      @id @default(cuid())
  first_line          String
  second_line         String?
  zip                 Int
  city                String
  province            String
  country             String
  user                User[]
  orders              Order[]
  created_at          DateTime    @default(now())
  updated_at          DateTime    @updatedAt
}

model Order {
  id                  String      @id @default(cuid())
  user                User        @relation(fields: [user_id], references: [id])
  user_id             String
  status              String
  amount              Decimal
  shipping_address    Address?    @relation(fields: [shipping_address_id], references: [id])
  shipping_address_id String?
  shipping_method     String?
  payment_method      String?
  products            Product[]
  deliveries          Delivery[]
  created_at          DateTime    @default(now())
  updated_at          DateTime    @updatedAt
}

model Product {
  id                  String      @id @default(cuid())
  name                String
  description         String?
  price               Decimal
  colours             Json
  images              Json
  quantity            Int         @default(0)
  category            String
  set                 String?
  orders              Order[]
  deleviries          Delivery[]
  created_at          DateTime    @default(now())
  updated_at          DateTime    @updatedAt
}

model Delivery {
  id                  String      @id @default(cuid())
  order               Order       @relation(fields: [order_id], references: [id])
  order_id            String
  status              String
  products            Product[]
  created_at          DateTime    @default(now())
  updated_at          DateTime    @updatedAt
}